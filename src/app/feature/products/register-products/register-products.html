<app-header></app-header>

<form class="product-container" [formGroup]="form" (ngSubmit)="submit()">

  <div class="title-box">
    <div class="icon-circle">
      <i class="fas fa-box"></i>
    </div>
    <h1>Cadastrar Novo Produto</h1>
    <p>Adicione um produto ao catálogo</p>
  </div>

  <div class="product-card">

    <!-- Nome -->
    <div class="form-group">
      <label>Nome do Produto *</label>
      <input type="text" formControlName="nome" placeholder="Digite o nome do produto">
      @if(submitted() && form.get('nome')?.invalid) {
        <div class="error">Nome é obrigatório.</div>
      }
    </div>

    <!-- Categoria -->
    <div class="form-group">
      <label>Categoria *</label>
      <select formControlName="categoria">
        <option value="">Selecione</option>
        <option value="Eletrônicos">Eletrônicos</option>
        <option value="Roupas">Roupas</option>
        <option value="Acessórios">Acessórios</option>
      </select>
      @if(submitted() && form.get('categoria')?.invalid) {
        <div class="error">Categoria é obrigatória.</div>
      }
    </div>

    <!-- Preço -->
    <div class="form-group">
      <label>Preço (R$) *</label>
      <input type="number" formControlName="preco" placeholder="0.00">
      @if(submitted() && form.get('preco')?.invalid) {
        <div class="error">
          @if(form.get('preco')?.errors?.['required']) { Preço é obrigatório. }
          @if(form.get('preco')?.errors?.['min']) { Preço deve ser maior que 0. }
        </div>
      }
    </div>

    <!-- Estoque -->
    <div class="form-group">
      <label>Quantidade em Estoque *</label>
      <input type="number" formControlName="quantidadeEstoque" placeholder="0">
      @if(submitted() && form.get('quantidadeEstoque')?.invalid) {
        <div class="error">
          @if(form.get('quantidadeEstoque')?.errors?.['required']) { Quantidade é obrigatória. }
          @if(form.get('quantidadeEstoque')?.errors?.['min']) { Quantidade não pode ser negativa. }
        </div>
      }
    </div>

    <!-- Descrição -->
    <div class="form-group">
      <label>Descrição *</label>
      <textarea formControlName="descricao" placeholder="Digite uma descrição detalhada do produto"></textarea>
      @if(submitted() && form.get('descricao')?.invalid) {
        <div class="error">Descrição é obrigatória.</div>
      }
    </div>

    <!-- Características -->
    <div class="form-group">
      <label>Características (separadas por vírgula)</label>
      <input type="text" formControlName="caracteristicas" placeholder="Ex: Bluetooth, USB-C, Garantia 1 ano">
      <small>Digite as características separadas por vírgula</small>
    </div>

    <!-- Botões -->
    <div class="buttons">
      <button class="btn-primary" type="submit" [disabled]="isSubmitting()">
        {{ isSubmitting() ? 'Cadastrando...' : 'Cadastrar Produto' }}
      </button>
      <button class="btn-secondary" type="button" (click)="clearForm()">
        Limpar Formulário
      </button>
    </div>

  </div>
</form>

<app-footer></app-footer>
