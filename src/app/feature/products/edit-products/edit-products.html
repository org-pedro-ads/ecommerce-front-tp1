<app-header></app-header>

<div class="layout-container">

  <app-sidebar></app-sidebar>

  <main class="content-area">
    
    <div class="page-container">

      <div class="header-box">
        <div class="icon-circle">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
            fill="none" stroke="#ffffff" stroke-width="2"
            stroke-linecap="round" stroke-linejoin="round">
            <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
            <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
          </svg>
        </div>
        <h1>Gerenciar Produtos</h1>
      </div>

      <form class="product-card" [formGroup]="form" (ngSubmit)="save()" autocomplete="off">

        <h2>Editar Produto</h2>

        <div class="form-group">
          <label>Nome do Produto *</label>
          <input type="text" formControlName="nome" placeholder="Digite o nome do produto">
          @if(submitted() && form.get('nome')?.invalid) {
            <div class="error">Nome é obrigatório.</div>
          }
        </div>

        <div class="form-group">
          <label>Categoria *</label>
          <select formControlName="categoria">
            <option value="">Selecione</option>
            <option value="Eletrônicos">Eletrônicos</option>
            <option value="Roupas">Roupas</option>
            <option value="Alimentos">Alimentos</option>
            <option value="Esporte">Esporte</option>
            <option value="Moveis">Moveis</option>
            <option value="Livros">Livros</option>
          </select>
          @if(submitted() && form.get('categoria')?.invalid) {
            <div class="error">Categoria é obrigatória.</div>
          }
        </div>

        <div class="form-row"> <div class="form-group half">
            <label>Preço (R$) *</label>
            <input type="number" formControlName="preco" placeholder="0.00">
            @if(submitted() && form.get('preco')?.invalid) {
              <div class="error">
                @if(form.get('preco')?.errors?.['required']) { Preço é obrigatório. }
                @if(form.get('preco')?.errors?.['min']) { Valor inválido. }
              </div>
            }
          </div>

          <div class="form-group half">
            <label>Estoque *</label>
            <input type="number" formControlName="quantidadeEstoque" placeholder="0">
            @if(submitted() && form.get('quantidadeEstoque')?.invalid) {
              <div class="error">
                @if(form.get('quantidadeEstoque')?.errors?.['required']) { Obrigatório. }
                @if(form.get('quantidadeEstoque')?.errors?.['min']) { Inválido. }
              </div>
            }
          </div>
        </div>

        <div class="form-group">
          <label>Descrição *</label>
          <textarea formControlName="descricao" placeholder="Digite uma descrição detalhada"></textarea>
          @if(submitted() && form.get('descricao')?.invalid) {
            <div class="error">Descrição é obrigatória.</div>
          }
        </div>

        <div class="form-group">
          <label>Características</label>
          <input type="text" formControlName="caracteristicas" placeholder="Ex: Bluetooth, USB-C, Garantia 1 ano">
          <small>Digite as características separadas por vírgula</small>
        </div>

        <div class="buttons">
          <button class="btn-primary" type="submit" [disabled]="isSubmitting()">
            Atualizar
          </button>

          <button class="btn-secondary" type="button" routerLink="/products/product-management/list">
            Cancelar
          </button>
        </div>

      </form>

    </div>
  </main>
</div>

<app-footer></app-footer>