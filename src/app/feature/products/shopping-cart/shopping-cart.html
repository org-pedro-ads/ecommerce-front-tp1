<app-header></app-header>
<div class="animate-in">
    <!-- Header -->
    <header>
      <div class="p-3 rounded-xl shadow-md bg-gradient-to-r">
        ðŸ›’
      </div>
  
      <div>
        <h1>Carrinho de Compras</h1>
        <p>Revise seus itens e finalize seu pedido</p>
      </div>
    </header>
  
    <!-- Carrinho vazio -->
    @if (itensCart() === null) {
      <section class="bg-white rounded-2xl shadow-md border p-12 text-center">
        <h3>Nenhum item no carrinho</h3>
        <p>Adicione produtos ao seu carrinho para continuar comprando.</p>
  
        <button
          class="px-6 py-3 bg-gradient-to-r rounded-xl"
          (click)="navigate('catalog')">
          Ver Produtos
        </button>
      </section>
    }
  
    <!-- Carrinho com itens -->
    @else {
      <section class="grid grid-cols-1 lg:grid-cols-3 gap-8">
  
        <!-- Lista -->
        <div class="lg:col-span-2 space-y-4">
          @for (item of itensCart()!.itens; track item.id) {
  
            <article class="bg-white rounded-2xl shadow-md border p-6">
              <div class="flex gap-6">
  
                <div class="w-24 h-24 bg-indigo-50 rounded-xl flex items-center justify-center">
                  ðŸ›’
                </div>
  
                <div class="flex-1">
                  <h3>{{ item.produto.nome }}</h3>
  
                  <p>
                    {{ item.preco | currency:'BRL':'symbol':'1.2-2' }} / unidade
                  </p>
  
                  <div class="flex justify-between items-center">
                    <app-quantidade-controle [contador]="item.quantidade" (contadorChange)="changeQuantity(item.produto.id, item.quantidade, $event)"></app-quantidade-controle>
                    <!-- Subtotal -->
                    <strong>
                      {{ item.subTotal | currency:'BRL':'symbol':'1.2-2' }}
                    </strong>
                  </div>
                </div>
  
                <!-- Remover -->
                <button
                  class="text-red-600"
                  (click)="removeFromCart(item.id)">
                  ðŸ—‘
                </button>
              </div>
            </article>
  
          }
        </div>
  
        <!-- Resumo -->
        <aside>
          <div class="bg-white rounded-2xl shadow-md border p-6">
            <h2>Resumo do Pedido</h2>
  
            <div class="space-y-4">
              <div class="flex justify-between border-b pb-4">
                <span>Subtotal</span>
                <span>{{ subtotal() | currency:'BRL' }}</span>
              </div>
  
              <div class="flex justify-between border-b pb-4">
                <span>Taxas (10%)</span>
                <span>{{ taxes() | currency:'BRL' }}</span>
              </div>
  
              <div class="flex justify-between font-semibold">
                <span>Total</span>
                <span>{{ total() | currency:'BRL' }}</span>
              </div>
            </div>
  
            <button
              class="w-full px-6 py-3 bg-gradient-to-r rounded-xl"
              (click)="checkout()">
              Finalizar Pedido
            </button>
  
            <button
              class="w-full px-6 py-3 bg-gray-100 rounded-xl"
              (click)="navigate('products/catalog')">
              Continuar Comprando
            </button>
          </div>
        </aside>
  
      </section>
    }
</div>
<app-footer></app-footer>